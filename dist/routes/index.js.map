{"version":3,"sources":["../../routes/index.js"],"names":["express","require","router","Router","ShopModel","ServiceModel","ItemModel","CommentModel","DetailModel","get","req","res","find","err","list","console","log","send","id","query","findOne","item","page","limit","skip","exec","comments","data","detail","module","exports"],"mappings":";;AAAA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;;AAEA,IAAMC,YAAYH,QAAQ,gBAAR,CAAlB;AACA,IAAMI,eAAeJ,QAAQ,mBAAR,CAArB;AACA,IAAMK,YAAYL,QAAQ,gBAAR,CAAlB;AACA,IAAMM,eAAeN,QAAQ,mBAAR,CAArB;AACA,IAAMO,cAAcP,QAAQ,kBAAR,CAApB;;AAEAC,OAAOO,GAAP,CAAW,cAAX,EAA0B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC5CP,YAAUQ,IAAV,CAAe,EAAf,EAAkB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACrC,QAAG,CAACD,GAAJ,EAAQ;AACNE,cAAQC,GAAR,CAAY,EAACF,MAAKA,IAAN,EAAZ;AACAH,UAAIM,IAAJ,CAAS,EAACH,MAAKA,IAAN,EAAT;AACD;AACF,GALD;AAMD,CAPD;;AASAZ,OAAOO,GAAP,CAAW,iBAAX,EAA8B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChDN,eAAaO,IAAb,CAAkB,EAAlB,EAAqB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACxC,QAAG,CAACD,GAAJ,EAAQ;AACNF,UAAIM,IAAJ,CAAS,EAACH,MAAKA,IAAN,EAAT;AACD;AACF,GAJD;AAKD,CAND;;AAQAZ,OAAOO,GAAP,CAAW,iBAAX,EAA8B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChD,MAAMO,KAAKR,IAAIS,KAAJ,CAAUD,EAArB;AACAZ,YAAUc,OAAV,CAAkB,EAACF,IAAGA,EAAJ,EAAlB,EAA2B,UAAUL,GAAV,EAAeQ,IAAf,EAAqB;AAC9C,QAAG,CAACR,GAAJ,EAAQ;AACNF,UAAIM,IAAJ,CAAS,EAACI,MAAKA,IAAN,EAAT;AACD;AACF,GAJD;AAKD,CAPD;;AASAnB,OAAOO,GAAP,CAAW,cAAX,EAA2B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC7C;AACA,MAAMW,OAAOZ,IAAIS,KAAJ,CAAUG,IAAvB;AACA;AACAf,eAAaK,IAAb,CAAkB,EAAlB,EAAsBW,KAAtB,CAA4B,EAA5B,EAAgCC,IAAhC,CAAqC,CAACF,OAAK,CAAN,IAAS,EAA9C,EAAkDG,IAAlD,CAAuD,UAAUZ,GAAV,EAAea,QAAf,EAAyB;AAC9E,QAAG,CAACb,GAAJ,EAAQ;AACNF,UAAIM,IAAJ,CAAS,EAACS,UAASA,QAAV,EAAT;AACD;AACF,GAJD;AAKD,CATD;;AAWAxB,OAAOO,GAAP,CAAW,YAAX,EAAyB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC3CH,cAAYI,IAAZ,CAAiB,EAAjB,EAAqB,UAAUC,GAAV,EAAec,IAAf,EAAqB;AACxC,QAAG,CAACd,GAAJ,EAAQ;AACNF,UAAIM,IAAJ,CAAS,EAACW,QAAOD,IAAR,EAAT;AACD;AACF,GAJD;AAKD,CAND;;AAQAE,OAAOC,OAAP,GAAiB5B,MAAjB","file":"index.js","sourcesContent":["var express = require('express')\nvar router = express.Router()\n\nconst ShopModel = require(\"../models/Shop\")\nconst ServiceModel = require(\"../models/Service\")\nconst ItemModel = require('../models/Item')\nconst CommentModel = require('../models/Comment')\nconst DetailModel = require('../models/Detail')\n\nrouter.get('/getShopList',function (req, res) {\n  ShopModel.find({},function (err, list) {\n    if(!err){\n      console.log({list:list})\n      res.send({list:list})\n    }\n  })\n});\n\nrouter.get('/getServiceList', function (req, res) {\n  ServiceModel.find({},function (err, list) {\n    if(!err){\n      res.send({list:list})\n    }\n  })\n})\n\nrouter.get('/getServiceItem', function (req, res) {\n  const id = req.query.id\n  ItemModel.findOne({id:id}, function (err, item) {\n    if(!err){\n      res.send({item:item})\n    }\n  })\n})\n\nrouter.get('/getComments', function (req, res) {\n  //分页公式：find().limit(每页显示条数).skip((页数-1)*每页显示条数)\n  const page = req.query.page\n  //exec - execute执行函数\n  CommentModel.find({}).limit(10).skip((page-1)*10).exec(function (err, comments) {\n    if(!err){\n      res.send({comments:comments})\n    }\n  })\n})\n\nrouter.get('/getDetail', function (req, res) {\n  DetailModel.find({}, function (err, data) {\n    if(!err){\n      res.send({detail:data})\n    }\n  })\n})\n\nmodule.exports = router\n"]}