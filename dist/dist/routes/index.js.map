{"version":3,"sources":["../../routes/index.js"],"names":["express","require","router","Router","ShopModel","ServiceModel","ItemModel","CommentModel","DetailModel","get","req","res","find","err","list","console","log","send","id","query","findOne","item","page","limit","skip","exec","comments","data","detail","module","exports"],"mappings":"AAAA;;AAEA,IAAIA,UAAUC,QAAQ,SAAR,CAAd;AACA,IAAIC,SAASF,QAAQG,MAAR,EAAb;;AAEA,IAAIC,YAAYH,QAAQ,gBAAR,CAAhB;AACA,IAAII,eAAeJ,QAAQ,mBAAR,CAAnB;AACA,IAAIK,YAAYL,QAAQ,gBAAR,CAAhB;AACA,IAAIM,eAAeN,QAAQ,mBAAR,CAAnB;AACA,IAAIO,cAAcP,QAAQ,kBAAR,CAAlB;;AAEAC,OAAOO,GAAP,CAAW,cAAX,EAA2B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC7CP,YAAUQ,IAAV,CAAe,EAAf,EAAmB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACtC,QAAI,CAACD,GAAL,EAAU;AACRE,cAAQC,GAAR,CAAY,EAAEF,MAAMA,IAAR,EAAZ;AACAH,UAAIM,IAAJ,CAAS,EAAEH,MAAMA,IAAR,EAAT;AACD;AACF,GALD;AAMD,CAPD;;AASAZ,OAAOO,GAAP,CAAW,iBAAX,EAA8B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChDN,eAAaO,IAAb,CAAkB,EAAlB,EAAsB,UAAUC,GAAV,EAAeC,IAAf,EAAqB;AACzC,QAAI,CAACD,GAAL,EAAU;AACRF,UAAIM,IAAJ,CAAS,EAAEH,MAAMA,IAAR,EAAT;AACD;AACF,GAJD;AAKD,CAND;;AAQAZ,OAAOO,GAAP,CAAW,iBAAX,EAA8B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAChD,MAAIO,KAAKR,IAAIS,KAAJ,CAAUD,EAAnB;AACAZ,YAAUc,OAAV,CAAkB,EAAlB,EAAsB,UAAUP,GAAV,EAAeQ,IAAf,EAAqB;AACzC,QAAI,CAACR,GAAL,EAAU;AACRF,UAAIM,IAAJ,CAAS,EAAEI,MAAMA,IAAR,EAAT;AACD;AACF,GAJD;AAKD,CAPD;;AASAnB,OAAOO,GAAP,CAAW,cAAX,EAA2B,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC7C;AACA,MAAIW,OAAOZ,IAAIS,KAAJ,CAAUG,IAArB;AACA;AACAf,eAAaK,IAAb,CAAkB,EAAlB,EAAsBW,KAAtB,CAA4B,EAA5B,EAAgCC,IAAhC,CAAqC,CAACF,OAAO,CAAR,IAAa,EAAlD,EAAsDG,IAAtD,CAA2D,UAAUZ,GAAV,EAAea,QAAf,EAAyB;AAClF,QAAI,CAACb,GAAL,EAAU;AACRF,UAAIM,IAAJ,CAAS,EAAES,UAAUA,QAAZ,EAAT;AACD;AACF,GAJD;AAKD,CATD;;AAWAxB,OAAOO,GAAP,CAAW,YAAX,EAAyB,UAAUC,GAAV,EAAeC,GAAf,EAAoB;AAC3CH,cAAYI,IAAZ,CAAiB,EAAjB,EAAqB,UAAUC,GAAV,EAAec,IAAf,EAAqB;AACxC,QAAI,CAACd,GAAL,EAAU;AACRF,UAAIM,IAAJ,CAAS,EAAEW,QAAQD,IAAV,EAAT;AACD;AACF,GAJD;AAKD,CAND;;AAQAE,OAAOC,OAAP,GAAiB5B,MAAjB;AACA","file":"index.js","sourcesContent":["\"use strict\";\n\nvar express = require('express');\nvar router = express.Router();\n\nvar ShopModel = require(\"../models/Shop\");\nvar ServiceModel = require(\"../models/Service\");\nvar ItemModel = require('../models/Item');\nvar CommentModel = require('../models/Comment');\nvar DetailModel = require('../models/Detail');\n\nrouter.get('/getShopList', function (req, res) {\n  ShopModel.find({}, function (err, list) {\n    if (!err) {\n      console.log({ list: list });\n      res.send({ list: list });\n    }\n  });\n});\n\nrouter.get('/getServiceList', function (req, res) {\n  ServiceModel.find({}, function (err, list) {\n    if (!err) {\n      res.send({ list: list });\n    }\n  });\n});\n\nrouter.get('/getServiceItem', function (req, res) {\n  var id = req.query.id;\n  ItemModel.findOne({}, function (err, item) {\n    if (!err) {\n      res.send({ item: item });\n    }\n  });\n});\n\nrouter.get('/getComments', function (req, res) {\n  //分页公式：find().limit(每页显示条数).skip((页数-1)*每页显示条数)\n  var page = req.query.page;\n  //exec - execute执行函数\n  CommentModel.find({}).limit(10).skip((page - 1) * 10).exec(function (err, comments) {\n    if (!err) {\n      res.send({ comments: comments });\n    }\n  });\n});\n\nrouter.get('/getDetail', function (req, res) {\n  DetailModel.find({}, function (err, data) {\n    if (!err) {\n      res.send({ detail: data });\n    }\n  });\n});\n\nmodule.exports = router;\n//# sourceMappingURL=index.js.map"]}